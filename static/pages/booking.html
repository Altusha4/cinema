<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CinemaGo | Secure Booking</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
<nav class="navbar">
    <a href="/" class="logo">üé¨ CinemaGo</a>
    <div class="nav-links">
        <a href="/" class="nav-link">Home</a>
        <a href="/pages/index.html" class="nav-link">Search</a>
        <a href="/pages/sessions.html" class="nav-link">Sessions</a>
        <a href="/pages/booking.html" class="nav-link active">Booking</a>
        <a href="/pages/admin.html" class="nav-link">Admin</a>
    </div>
</nav>

<h1>üéüÔ∏è Finalize Your Booking</h1>

<div class="card">
    <h3>üìã Selected Session</h3>
    <div id="sessionPreview" class="session-preview">
        <p class="preview-text">No session selected. Please <a href="/pages/sessions.html">choose a session first</a>.</p>
    </div>
</div>

<div class="card" id="bookingForm" style="display: none;">
    <h3>üë§ Personal Information</h3>

    <div class="form-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" placeholder="student@aitu.edu.kz" required>
        <small>Your digital ticket and promo code will be sent here.</small>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="age">Your Age</label>
            <input type="number" id="age" placeholder="18" min="0" max="120" required>
        </div>

        <div class="form-group">
            <label for="seat">Selected Seat</label>
            <input type="text" id="seat" placeholder="Select from list below..." readonly required>
        </div>
    </div>

    <div class="form-group">
        <label>Available Seats (Select one)</label>
        <div id="availableSeats" class="seats-container">
        </div>
        <small>Click on a seat to select it. Darker green seats are available.</small>
    </div>

    <div class="form-group">
        <label class="student-option">
            <input type="checkbox" id="isStudent" checked>
            <span>Apply AITU Student Discount (20%)</span>
        </label>
    </div>

    <div class="price-summary">
        <div class="price-row">
            <span>Standard Price:</span>
            <span id="basePrice">0 ‚Ç∏</span>
        </div>
        <div class="price-row discount">
            <span>Student Discount:</span>
            <span id="discountAmount">-0 ‚Ç∏</span>
        </div>
        <div class="price-row total">
            <span>Total Amount:</span>
            <strong id="totalPrice">0 ‚Ç∏</strong>
        </div>
    </div>

    <div class="booking-actions">
        <button onclick="bookTicket()" id="bookButton">Confirm & Pay</button>
        <button onclick="navigateTo('sessions')" class="secondary">Change Session</button>
    </div>

    <div id="bookingResult"></div>
</div>

<div class="card" id="successBooking" style="display: none; border-color: var(--color-accent);">
    <h3>‚ú® Booking Successful!</h3>
    <div class="success-message">
        <p>Thank you! –í–∞—à–µ –º–µ—Å—Ç–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∏–ª–µ—Ç–∞.</p>

        <div id="ticketDetails">
        </div>

        <div class="success-actions">
            <button onclick="printTicket()" class="primary-action">üñ®Ô∏è Print Ticket</button>
            <button onclick="location.href='/'" class="secondary">üè† Return to Dashboard</button>
        </div>
    </div>
</div>

<script src="/static/js/app.js"></script>
<script src="/static/js/booking.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏ –∏–∑ sessionStorage
        loadSelectedSession();
    });
</script>
</body>
</html>